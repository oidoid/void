import {expect, test} from 'vitest'
import {parseTileset} from './tileset-parser.js'

test('parses', () => {
  expect(
    parseTileset(
      {
        frames: {
          'abc--def--123': {
            frame: {x: 0, y: 0, w: 256, h: 192},
            sourceSize: {w: 256, h: 192}
          }
        },
        meta: {
          frameTags: [],
          size: {w: 256, h: 192},
          slices: [
            {name: 'Wall', keys: [{bounds: {x: 0, y: 0, w: 48, h: 64}}]},
            {name: 'Wall', keys: [{bounds: {x: 48, y: 88, w: 16, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 72, y: 0, w: 56, h: 32}}]},
            {name: 'Wall', keys: [{bounds: {x: 128, y: 24, w: 32, h: 40}}]},
            {name: 'Wall', keys: [{bounds: {x: 104, y: 56, w: 15, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 0, y: 88, w: 8, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 48, y: 152, w: 32, h: 16}}]},
            {name: 'Wall', keys: [{bounds: {x: 48, y: 168, w: 16, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 56, y: 176, w: 8, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 72, y: 168, w: 8, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 88, y: 168, w: 8, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 80, y: 160, w: 8, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 40, y: 152, w: 8, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 48, y: 144, w: 16, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 0, y: 160, w: 16, h: 16}}]},
            {name: 'Wall', keys: [{bounds: {x: 0, y: 144, w: 8, h: 16}}]},
            {name: 'Wall', keys: [{bounds: {x: 8, y: 144, w: 8, h: 16}}]},
            {name: 'Ladder', keys: [{bounds: {x: 24, y: 88, w: 16, h: 8}}]},
            {name: 'Ladder', keys: [{bounds: {x: 80, y: 56, w: 16, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 0, y: 176, w: 8, h: 8}}]},
            {name: 'Store', keys: [{bounds: {x: 8, y: 176, w: 8, h: 8}}]},
            {name: 'Door', keys: [{bounds: {x: 72, y: 56, w: 8, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 0, y: 80, w: 24, h: 8}}]},
            {name: 'Wall', keys: [{bounds: {x: 0, y: 64, w: 24, h: 16}}]},
            {name: 'Wall', keys: [{bounds: {x: 40, y: 64, w: 8, h: 16}}]},
            {name: 'Door', keys: [{bounds: {x: 24, y: 64, w: 16, h: 16}}]},
            {name: 'Wall', keys: [{bounds: {x: 72, y: 32, w: 8, h: 24}}]},
            {name: 'Wall', keys: [{bounds: {x: 96, y: 32, w: 32, h: 24}}]},
            {name: 'Door', keys: [{bounds: {x: 80, y: 32, w: 16, h: 16}}]},
            {name: 'TileWH', keys: [{bounds: {x: 0, y: 112, w: 8, h: 8}}]}
          ]
        }
      },
      {Door: null, Ladder: null, Store: null, TileWH: null, Wall: null}
    )
  ).toMatchInlineSnapshot(`
    {
      "h": 192,
      "side": 8,
      "tile": [
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        "Wall",
        "Door",
        "Door",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        "Wall",
        "Door",
        "Door",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        "Wall",
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        "Door",
        "Ladder",
        "Ladder",
        undefined,
        "Wall",
        "Wall",
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Door",
        "Door",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Door",
        "Door",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        undefined,
        undefined,
        "Ladder",
        "Ladder",
        undefined,
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "TileWH",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Wall",
        undefined,
        "Wall",
        undefined,
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        "Store",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        "Wall",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      ],
      "w": 256,
    }
  `)
})
